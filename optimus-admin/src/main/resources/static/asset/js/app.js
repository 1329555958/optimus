/*! hx 2016-05-17 13 */
define("app",["config","base"],function(config){var app=angular.module("app",["ngExtend","ui.router"]);return angular.CFG=config,app.constant("VIEWS_BASE_PATH",config.views_base_path),app.config(function($stateProvider,VIEWS_BASE_PATH,$controllerProvider,$filterProvider,$requireProvider,$urlRouterProvider,$provide){function resolve($q,url,deps){var def=$q.defer();return require(deps,function(){def.resolve()},function(){def.resolve(),console.warn(url+"没有对应的js依赖!")}),def.promise}function addSuffix(url){if(-1!==url.indexOf("."))return url;var index=url.indexOf("?");return-1===index?url+suffix:url.substring(0,index)+suffix+url.substring(index)}function getDeps(url){var dep=url;return dep&&(0===dep.indexOf("/")&&(dep=dep.substring(1)),dep=dep.split(/[.\?]/)[0]),[dep]}app.register={controller:$controllerProvider.register,filter:$filterProvider.register,factory:$provide.factory};var suffix=config.view_suffix;$urlRouterProvider.when(/^\/?$/,"/products"),$stateProvider.state("def",{url:"{url:[^@]*}",templateUrl:function($stateParams){var url=VIEWS_BASE_PATH+$stateParams.url;return addSuffix(url)},resolve:{require:function($q,$stateParams){return resolve($q,$stateParams.url,getDeps($stateParams.url))}}})}),app}),require(["app","config","condition"],function(app,config){app.controller("rootController",function($rootScope,$timeout,$myhttp){$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){$rootScope.$broadcast(config.EVENTS.ROUTER_CHANGE_SUCCESS,null)}),$rootScope.random=function(){},$rootScope.member={},$myhttp.get("/member",function(member){$rootScope.member=member}),$rootScope.logout=function(){window.location.href=APPROOT+"/logout"}}),app.controller("menuController",function($rest,$scope){$scope.menuData=[],$rest.get("menu",null,function(data){console.log("menu data",data),$scope.menuData=data})}),angular.element(document).ready(function(){$(document).delegate("a","click",function(event){var href=$(this).attr("href");"#"===href&&event.preventDefault()}),angular.bootstrap(document,["app"])})});