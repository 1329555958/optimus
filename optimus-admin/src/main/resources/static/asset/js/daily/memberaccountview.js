/*! hx 2016-05-17 13 */
require("app").register.controller("memberAccountViewController",function($scope,$timeout,$myhttp,$location){$scope.orders=[],$scope.statuses=[{text:"全部",value:"S,F"},{text:"成功",value:"S"},{text:"失败",value:"F"}],$scope.types=[{text:"全部",value:""},{text:"充值",value:"deposit"},{text:"提现",value:"withdraw"},{text:"投资",value:"buy"},{text:"还款",value:"recovery"},{text:"退款",value:"refund"}],$scope.orderType=$scope.types[0].value,$scope.orderStatus=$scope.statuses[0].value,$scope.date=new Date((new Date).getTime()),$scope.userId=$location.search().userId,$scope.loading=!1,$scope.pagination={currentPage:1,totalPage:0};var moment=require("moment");$scope.query=function(page){$scope.loading=!0;var param={};param.date=$scope.date&&moment($scope.date).format("YYYYMMDD"),param.type=$scope.orderType,param.orderStatus=$scope.orderStatus,param.userId=$scope.userId,param.pageNum=page||1,console.log(param),$myhttp("loading",$scope).get("/account/trade",param,function(result){$scope.pagination.currentPage=result.pageIndex,$scope.pagination.totalPage=result.pageCount,$scope.orders=result.result})},$timeout($scope.query,300)});