/*! finlog 2016-05-18 09 */
function querySubjects(pageNum,pageSize,success){pageNum=pageNum||PageNum,pageSize=pageSize||10,1===pageNum&&$("#loading").show(),mui.$get("/account/tradeDetail",{pageSize:pageSize,pageNum:pageNum},function(data){console.log(data),HasMore=hasMore(data),insertToDom(data.result),success&&success.call(window,data),PageNum=data.pageIndex+1},function(){$("#loading").hide()},function(){mui.toast("网络异常,请再次刷新!"),console.dir(arguments)})}function hasMore(data){return data.pageIndex*data.pageSize<data.itemCount}function insertToDom(list){if(list&&list.length)for(var i=0;i<list.length;i++)$("#tradeContainer").append(template(list[i]))}var template=mui.$template($("#tradeTmpl").html()),PageNum=1,HasMore=!0;mui.init({pullRefresh:{container:"#uploadDiv",up:{contentrefresh:"正在加载...",contentnomore:"没有更多数据了",callback:function(){var t=this;HasMore?querySubjects(null,10,function(data){t.endPullupToRefresh(!HasMore)}):t.endPullupToRefresh(!HasMore)}}}}),querySubjects();